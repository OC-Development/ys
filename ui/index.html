<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>DzRide</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
    <link rel="stylesheet" href="styles.css" />
    <link rel="stylesheet" href="leaflet.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com"/>
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin/>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700;800&display=swap" rel="stylesheet"/>
  </head>
  <body>
    <div id="phone-wrapper">
      <div class="app" data-theme="dark">
        <!-- ============ Screen: Home Map + Bottom Sheet ============ -->
        <section id="screen-home" class="screen show">
          <!-- Header with Uber branding -->
          <div class="app-header">
            <div class="brand-logo">
              <svg width="80" height="24" viewBox="0 0 80 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <rect width="80" height="24" rx="4" fill="#000"/>
                <text x="40" y="16" text-anchor="middle" font-family="Poppins" font-weight="800" font-size="12" fill="#fff">UBER</text>
              </svg>
            </div>
            <div class="location-info">
              <div class="current-location">
                <span class="location-icon">üìç</span>
                <span class="location-text">Current Location</span>
              </div>
            </div>
          </div>

            <div id="homeMap" class="map"></div>

            <!-- User location button -->
            <button class="location-btn" id="centerLocation">
              <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                <circle cx="10" cy="10" r="8" stroke="currentColor" stroke-width="2" fill="none"/>
                <circle cx="10" cy="10" r="2" fill="currentColor"/>
              </svg>
            </button>

            <!-- Driver mode button -->
            <button id="btnDriver" class="driver-fab">Me</button>

            <!-- Main ride booking card -->
            <div class="bottom-sheet">
              <div class="ride-options">
                <div class="ride-type active" data-type="uberx">
                  <div class="ride-icon">üöó</div>
                  <div class="ride-name">UberX</div>
                  <div class="ride-desc">Affordable rides</div>
                </div>
                <div class="ride-type" data-type="comfort">
                  <div class="ride-icon">üöô</div>
                  <div class="ride-name">Comfort</div>
                  <div class="ride-desc">Extra legroom</div>
                </div>
                <div class="ride-type" data-type="xl">
                  <div class="ride-icon">üöê</div>
                  <div class="ride-name">UberXL</div>
                  <div class="ride-desc">6 seats</div>
                </div>
              </div>
              
              <div class="destination-input">
                <div class="input-header">
                  <h2>Where to?</h2>
                </div>
                <button id="btnOpenCustomize" class="destination-btn">
                  <div class="destination-icon">üîç</div>
                  <span class="destination-text">Enter your destination</span>
                  <span class="arrow">‚Üí</span>
                </button>
              </div>
              
              <div class="quick-destinations">
                <div class="quick-dest" id="quickHome">
                  <div class="quick-icon">üè†</div>
                  <span>Home</span>
                </div>
                <div class="quick-dest" id="quickWork">
                  <div class="quick-icon">üíº</div>
                  <span>Work</span>
                </div>
                <div class="quick-dest" id="quickSaved">
                  <div class="quick-icon">‚≠ê</div>
                  <span>Saved</span>
                </div>
              </div>
            </div>
        </section>

        <!-- ============ Screen: Customize Ride ============ -->
        <section id="screen-customize" class="screen">
          <div class="toolbar">
            <button class="tool-back" id="backFromCustomize">‚Äπ</button>
            <h2>Plan your trip</h2>
            <div style="width:40px"></div>
          </div>

          <div class="trip-inputs panel">
            <div class="input-row pickup-row active" data-kind="pickup">
              <div class="input-icon pickup-icon">üîµ</div>
              <input id="pickupInput" type="text" placeholder="Pickup location" />
              <button class="map-btn" title="Set on map" id="setPickupMap">üìç</button>
            </div>
            <div class="input-connector"></div>
            <div class="input-row destination-row" data-kind="destination">
              <div class="input-icon destination-icon">üî¥</div>
              <input id="destInput" type="text" placeholder="Where to?" />
              <button class="map-btn" title="Set on map" id="setDestMap">üìç</button>
            </div>
          </div>

          <div class="panel">
            <h3>Saved places</h3>
            <div class="saved-places">
              <button class="saved-place" id="chipHome">
                <div class="saved-icon">üè†</div>
                <span>Add home</span>
              </button>
              <button class="saved-place" id="chipWork">
                <div class="saved-icon">üíº</div>
                <span>Add work</span>
              </button>
              <button class="saved-place">
                <div class="saved-icon">‚≠ê</div>
                <span>Add favorite</span>
              </button>
            </div>
          </div>

          <div class="panel location-options">
            <button id="useCurrent" class="location-option">
              <div class="option-icon">üìç</div>
              <div class="option-content">
                <div class="option-title">Use current location</div>
                <div class="option-desc">Set pickup to your current position</div>
              </div>
            </button>
            <button id="chooseOnMap" class="location-option">
              <div class="option-icon">üó∫Ô∏è</div>
              <div class="option-content">
                <div class="option-title">Choose on map</div>
                <div class="option-desc">Pin your location manually</div>
              </div>
            </button>
          </div>

          <button id="btnCustomizeNext" class="btn giant pri disabled">Confirm pickup</button>
        </section>

        <!-- ============ Screen: Pick on Map (full) ============ -->
        <section id="screen-pick" class="screen">
          <div class="toolbar">
            <button class="tool-back" id="backFromPick">‚Äπ</button>
            <h2 id="pickTitle">Set location</h2>
            <div style="width:40px"></div>
          </div>
          <div id="pickMap" class="map"></div>

          <!-- Enhanced center pin -->
          <div class="map-pin">
            <div class="pin-marker">
              <div class="pin-head"></div>
              <div class="pin-shadow"></div>
            </div>
          </div>

          <div class="bottom-sheet">
            <div class="selected-location">
              <div class="location-icon">üìç</div>
              <div class="location-details">
                <div class="location-title">Selected location</div>
                <p id="pickedAddress" class="location-address">Move map to select location</p>
              </div>
            </div>
            <button id="btnPickContinue" class="btn giant pri">Confirm location</button>
          </div>
        </section>

        <!-- ============ Screen: Driver (Incoming Requests) ============ -->
        <section id="screen-driver" class="screen">
            <div class="toolbar">
                <button class="tool-back" id="backFromDriver">‚Äπ</button>
                <h2>Driver Dashboard</h2>
                <div style="width:40px"></div>
            </div>

            <div class="driver-status panel">
              <div class="status-indicator online"></div>
              <div class="status-text">
                <div class="status-title">You're online</div>
                <div class="status-desc">Ready to accept ride requests</div>
              </div>
              <button class="status-toggle">Go offline</button>
            </div>

            <div id="driverList" class="driver-list panel" style="margin-top:10px;">
                <!-- Populated by script -->
            </div>
        </section>
      </div>
    </div>

    <script src="leaflet.js"></script>
    <script src="script.js"></script>
    <script>
      // Boot after LB-Phone components are ready
      window.addEventListener('message', (e) => {
        if (e.data === 'componentsLoaded') {
          window.DzRideBoot && window.DzRideBoot();
        }
      });
    </script>
  </body>
</html>
